<!DOCTYPE html>
<html lang="en"><head><meta charSet="utf-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><meta name="author" content="fsoc"></meta><meta name="author" content="Laurenz Weixlbaumer"></meta><link href="/styles/base.css" rel="stylesheet"></link><link href="/styles/font.css" rel="stylesheet"></link><title>Using ImGui to Create a Simple GUI in C++</title><meta name="description" content="I created a GUI for a side project of mine with minimal effort and convenient usage and you can too!"></meta><link href="/styles/syntax-theme.css" rel="stylesheet"></link></head><body><div class="min-h-screen flex flex-col h-full "><header class="container border-b border-gray-300 dark:border-gray-600 mt-4 mb-4 pb-4"><div class="prose dark:prose-invert text-black dark:text-white"><a href="/">fsoc</a> / <a href="/words">words</a></div></header><main class="container prose dark:prose-invert lg:prose-lg pb-8"><h1 class="mt-4">Using ImGui to Create a Simple GUI in C++</h1><aside class="mb-4 flex flex-row justify-between"><small>Published on 21/08/2022</small><small><a href="https://github.com/fs-c/fsoc.space/edit/workbench/posts/using-imgui-to-create-a-cpp-ui.md">Edit on github</a></small></aside><figure role="img"><img src="https://github.com/fs-c/maniac/raw/master/media/showcase.png" alt=""><figcaption></figcaption></figure><p>A while ago I added a GUI to a side project of mine, <a href="https://github.com/fs-c/maniac">maniac</a>. I had never written an application with a GUI before, but I had previously used <a href="https://github.com/ocornut/imgui">ImGui</a> to create <a href="https://github.com/fs-c/acchud">a custom HUD</a> for a racing game. That project consisted of a DLL which hijacked the game's drawing function to render the custom interface. I hope to get around to writing about that in the future, it was a fun project.</p><p>This time was different, since I didn't have a drawing function to hijack. Luckily ImGui has a very extensive collection of <a href="https://github.com/ocornut/imgui/tree/master/examples">examples</a> and it was easy enough to just start out with one of them as the baseline. (For reference: I chose the DirectX 9 example because I am somewhat familiar with the API, but Vulkan or a more recent DX version would have probably been better.)</p><p>Integrating ImGui into a build system is kind of wacky because they seem to want you to just copy the files you need into your project. I didn't want to do that, so I added the ImGui repository as a <a href="https://git-scm.com/book/en/v2/Git-Tools-Submodules">git submodule</a> with</p><pre><code class="language-bash">$ git submodule add https://github.com/ocornut/imgui app/dependencies</code></pre><p>and adjusted the relevant CMakeList file to</p><pre><code class="language-cmake">add_executable(maniac-app app.cpp window.cpp
    dependencies/imgui/imgui.cpp
    dependencies/imgui/backends/imgui_impl_dx9.cpp
    dependencies/imgui/backends/imgui_impl_win32.cpp
    dependencies/imgui/imgui_demo.cpp
    dependencies/imgui/imgui_draw.cpp
    dependencies/imgui/imgui_tables.cpp
    dependencies/imgui/imgui_widgets.cpp)

target_include_directories(maniac-app PRIVATE dependencies)
target_include_directories(maniac-app PRIVATE dependencies/imgui)

target_link_libraries(maniac-app PRIVATE maniac d3d9.lib)</code></pre><p>I added the dependencies folder to the includes so I could import imgui-related headers with an <code>imgui/</code> prefix, but had to add the imgui subfolder itself to the includes as well to avoid having to rewrite all the imports in the imgui implementation files.</p><p>Now it's just a matter of adjusting the example code to fit into a larger project. I moved the code that was previously in <code>main</code> into a separate function and made it accept a "content" function that would be rendered inside the main loop.</p><pre><code class="language-cpp">void gui::render(std::function&lt;void()&gt; body) {
    // imgui setup...

    while (!done) {
        // check if we should exit...

        // create new frame, handle viewport/window position, ...

        body();

        // end frame, render it, post-frame cleanup...
    }
}</code></pre><p>(This is really just to give you an idea of what I did to integrate the example code into my project. Take a look at <a href="https://github.com/ocornut/imgui/tree/master/examples">one of the examples</a>, it will be clearer.)</p><p>In the <code>main</code> of my project I could now do</p><pre><code class="language-cpp">int main (int, char **) {
    // ...

    gui::render([&amp;message] {
        ImGui::Begin("maniac", nullptr, ImGuiWindowFlags_NoDecoration | ImGuiWindowFlags_NoResize);

        ImGui::Text("Status: %s", message.c_str());

        ImGui::DragIntRange2("Randomization", &amp;maniac::config.randomization_range.first,
            &amp;maniac::config.randomization_range.second);

        // ...
    });
}</code></pre><p>Simple and clean!</p><p>Now for actually writing the GUI code: I recommend taking a look at the code of the <a href="https://github.com/ocornut/imgui/blob/master/imgui_demo.cpp">ImGui Demo window</a>, which showcases an impressive amount of features in an easy-to-read fashion. I was originally somewhat put-out by the fact that ImGui doesn't have any traditional documentatio; all of it is inside the actual source files. Looking back though, doing it this way is pretty neat. The starting point for most inquiries (and when just starting out learning) is the demo code, which is often self-explanatory and otherwise well commented. When something is not immediately clear, a quick search through the imgui codebase will quickly yield the relevant function declarations alongside documentation comments.</p><p>This workflow wasn't immediately intuitive to me, but it sure works well once you get used to it!</p><script src="https://unpkg.com/prismjs@v1.x/components/prism-core.min.js"></script><script src="https://unpkg.com/prismjs@v1.x/plugins/autoloader/prism-autoloader.min.js"></script></main></div><footer class="flex flex-row justify-between prose dark:prose-invert container text-md py-3 mb-1 border-t border-gray-300 dark:border-gray-600 mt-4"><p class="m-0">Built with <a href="https://github.com/fs-c/dhow/tree/rewrite">fs-c/dhow</a>.</p><a href="/legal">imprint & privacy</a></footer></body></html>